{% extends "base.html" %}


{% block content %}
    <main role="main" class="container p-0">
        {% for feature in featured_posts %} 
        {% if forloop.first %}
        <div class="featured-hero" style="background-image: url({{ feature.featured_image.url }});">
          <div class="featured-overlay"></div>
          <div class="featured-content">
            <div class="featured-badge">Featured Story</div>
            <h1 class="featured-title">{{ feature.title }}</h1>
            <p class="featured-description">{{ feature.short_description | truncatewords:25 }}</p>
            <a href="{% url 'blog' feature.slug %}" class="btn-continue">Continue reading →</a>
          </div>
        </div>
        {% endif %} 
        {% endfor %}

        <section class="featured-section">
          <h2 class="section-title">Featured Posts</h2>
          <div class="row">
            {% for feature in featured_posts %}
            {% if not forloop.first %}
            <div class="col-md-6 mb-4">
              <div class="post-card">
                <div class="post-card-body">
                  <span class="post-category">{{feature.category}}</span>
                  <h3 class="post-title">{{feature.title}}</h3>
                  <div class="post-meta">
                    <span>{{feature.updated_at | timesince}} ago</span>
                    <span class="meta-separator">•</span>
                    <span>{{feature.author}}</span>
                  </div>
                  <p class="post-excerpt">{{feature.short_description | truncatewords:20}}</p>
                  <a href="{% url 'blog' feature.slug %}" class="read-more">Read more →</a>
                </div>
              </div>
            </div>
            {% endif %}
            {% endfor %}
          </div>
        </section>

        <div class="row mt-5">
          <div class="col-md-8 blog-main">
            <section class="recent-posts">
              <h2 class="section-title">Recent Posts</h2>
              {% for recent in recent_posts %}
              <article class="recent-post-item">
                <h3 class="recent-post-title">{{recent.title}}</h3>
                <div class="post-meta">
                  <span>{{recent.updated_at | timesince}} ago</span>
                  <span class="meta-separator">•</span>
                  <span>by <a href="#" class="author-link">{{recent.author}}</a></span>
                </div>
                <p class="recent-post-excerpt">{{recent.short_description | truncatewords:20}}</p>
                <a href="{% url 'blog' recent.slug%}" class="read-more">Read more →</a>
              </article>
              {% endfor %}
            </section>
          </div>

          <aside class="col-md-4 blog-sidebar">
            <div class="sidebar-card about-card">
              <h4 class="sidebar-title">{{ about.heading }}</h4>
              <p class="sidebar-text">
                {{ about.body }}
              </p>
            </div>
            <div class="sidebar-card social-card">
              <h4 class="sidebar-title">Follow Us</h4>
                <ul class="social-links">
                  {% for f in follow %}
                  <li>
                    <a href="{{ f.platform_link }}" class="social-link">{{f.platform_name}}</a>
                  </li>
                  {% endfor %}
                </ul>
            </div>
          </aside>
        </div>
      </main>
    </div>
  </main>
{% endblock %}